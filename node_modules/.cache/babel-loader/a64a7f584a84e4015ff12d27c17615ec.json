{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kimmold\\\\Programming\\\\\\uCF54\\uB529\\uD14C\\uC2A4\\uD2B8\\\\NearthLab\\\\nearthlab\\\\src\\\\pages\\\\photoList.js\";\nimport getApi from '../@api/api.js';\nimport React from 'react';\nimport Pagination from \"react-js-pagination\";\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Photo extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      img: \"\",\n      name: \"\",\n      labelCnt: 0,\n      complete: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Link, {\n      to: {\n        pathname: '/detail',\n        state: {\n          photoInfo: this.props.photoInfo\n        }\n      },\n      style: {\n        flex: 1,\n        flexBasis: \"25%\",\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: this.props.photoInfo.photoUrl,\n        style: {\n          height: \"80%\",\n          width: \"80%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nclass PhotoList extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      photos: [],\n      loaded: false,\n      chklist: [],\n      page: 1,\n      meta: \"\"\n    };\n\n    this.setIndex = sendPage => {\n      this.setState({\n        page: sendPage\n      });\n    };\n\n    this.handleLabelClick = e => {\n      console.log(e.target.id);\n      let arr = this.props.chklist;\n\n      if (e.target.checked) {\n        arr.push(e.target.id);\n        console.log(this.state.chklist, arr);\n        this.props.setChklist(arr);\n        const data = getApi.getPhotoList(this.props.page, 12, this.props.chklist);\n        console.log(data.photos);\n        this.setState({\n          photos: data.photos\n        }); //this.setState({chklist:arr});\n      } else if (!e.target.checked) {\n        arr = arr.filter(element => element !== e.target.id); //this.setState({chklist:arr});\n\n        this.setState({\n          chklist: arr\n        }, async () => {\n          const data = await getApi.getPhotoList(this.props.page, 12, this.props.chklist);\n          this.setState({\n            photos: data.photos\n          });\n          console.log(this.props.chklist);\n        });\n      }\n    };\n  }\n\n  async componentDidMount() {\n    const data = await getApi.getPhotoList(this.props.page, 12, this.props.chklist);\n    const meta = data.meta;\n    const photos = data.photos;\n    const labels = await getApi.getLabelList();\n    this.props.setLabels(labels);\n    this.setState({\n      photos: photos,\n      loaded: true,\n      meta: meta\n    });\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    console.log(this.props.labels, prevProps.labels);\n\n    if (prevProps.labels !== this.props.labels || prevProps.page !== this.props.page) {\n      //const data = await getApi.getPhotoList(this.props.page,12,this.props.chklist);\n      const meta = data.meta;\n      const photos = data.photos;\n      this.setState({\n        photos: photos,\n        loaded: true\n      });\n    }\n  }\n\n  handlePageChange(pageNumber) {\n    console.log(pageNumber);\n    this.props.setPage(pageNumber);\n  }\n\n  render() {\n    if (!this.state.loaded) return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);else return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.props.labels.map(item => /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: item.id,\n          onChange: e => this.handleLabelClick(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 16\n        }, this), item.title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexWrap: \"wrap\",\n          justifyContent: \"space-evenly\"\n        },\n        children: this.state.photos.map(item => /*#__PURE__*/_jsxDEV(Photo, {\n          photoInfo: item\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        activePage: this.state.page,\n        itemsCountPerPage: this.state.meta.per,\n        totalItemsCount: this.state.meta.total,\n        pageRangeDisplayed: 8,\n        onChange: this.handlePageChange.bind(this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default PhotoList;","map":{"version":3,"sources":["C:/Users/kimmold/Programming/코딩테스트/NearthLab/nearthlab/src/pages/photoList.js"],"names":["getApi","React","Pagination","Link","Photo","Component","state","img","name","labelCnt","complete","render","pathname","photoInfo","props","flex","flexBasis","textAlign","photoUrl","height","width","PhotoList","photos","loaded","chklist","page","meta","setIndex","sendPage","setState","handleLabelClick","e","console","log","target","id","arr","checked","push","setChklist","data","getPhotoList","filter","element","componentDidMount","labels","getLabelList","setLabels","componentDidUpdate","prevProps","prevState","handlePageChange","pageNumber","setPage","map","item","title","display","flexWrap","justifyContent","per","total","bind"],"mappings":"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","sourcesContent":["\r\nimport getApi from '../@api/api.js';\r\nimport React from 'react';\r\nimport Pagination from \"react-js-pagination\";\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nclass Photo extends React.Component{\r\n  state={\r\n    img:\"\",\r\n    name:\"\",\r\n    labelCnt:0,\r\n    complete:false\r\n  }\r\n\r\n  render(){\r\n    return <Link to={{pathname:'/detail', state:{photoInfo:this.props.photoInfo}}} style={{flex:1,flexBasis:\"25%\",textAlign:\"center\"}}>\r\n      <img src={this.props.photoInfo.photoUrl} style={{height:\"80%\",width:\"80%\"}} />\r\n      </Link>\r\n  }\r\n}\r\n\r\nclass PhotoList extends React.Component {\r\n  state={\r\n    photos:[],\r\n    loaded:false,\r\n    chklist:[],\r\n    page:1,\r\n    meta:\"\"\r\n  };\r\n  async componentDidMount() {\r\n    const data = await getApi.getPhotoList(this.props.page,12,this.props.chklist);\r\n    const meta = data.meta;\r\n    const photos =data.photos;\r\n    const labels = await getApi.getLabelList();\r\n    this.props.setLabels(labels);\r\n    this.setState({photos:photos, loaded:true,meta:meta});\r\n  }\r\n  async componentDidUpdate(prevProps, prevState){\r\n    console.log(this.props.labels,prevProps.labels);\r\n    if(prevProps.labels!==this.props.labels||prevProps.page!== this.props.page){\r\n      //const data = await getApi.getPhotoList(this.props.page,12,this.props.chklist);\r\n      const meta = data.meta;\r\n      const photos =data.photos;\r\n      this.setState({photos:photos, loaded:true});\r\n    }\r\n  }\r\n  setIndex = sendPage => {\r\n    this.setState({\r\n      page: sendPage,\r\n    });\r\n  };\r\n  handleLabelClick = (e)=>{\r\n    console.log(e.target.id);\r\n    let arr=this.props.chklist;\r\n    if(e.target.checked){\r\n      arr.push(e.target.id);\r\n      console.log(this.state.chklist,arr);\r\n      this.props.setChklist(arr)\r\n      const data =  getApi.getPhotoList(this.props.page,12,this.props.chklist);\r\n\r\n      console.log(data.photos);\r\n      this.setState({photos:data.photos});\r\n\r\n      //this.setState({chklist:arr});\r\n    }\r\n    else if(!e.target.checked){\r\n      arr=arr.filter((element)=>element!==e.target.id);\r\n      //this.setState({chklist:arr});\r\n      this.setState({chklist:arr},async ()=>{\r\n        const data = await getApi.getPhotoList(this.props.page,12,this.props.chklist);\r\n        this.setState({photos:data.photos});\r\n        console.log(this.props.chklist)}\r\n      );\r\n    }\r\n  }\r\n  handlePageChange(pageNumber){\r\n    console.log(pageNumber)\r\n    this.props.setPage(pageNumber);\r\n  }\r\n\r\n  render() {\r\n    if(!this.state.loaded) return <></>;\r\n    else return <>\r\n      {this.props.labels.map((item)=>(\r\n        <label><input type=\"checkbox\" id={item.id} onChange={(e)=>this.handleLabelClick(e)} />{item.title}</label>\r\n      ))}\r\n\r\n      <div style={{display:'flex',flexWrap:\"wrap\",justifyContent:\"space-evenly\"}}>\r\n      {this.state.photos.map((item)=>(\r\n        <Photo photoInfo={item} />\r\n      ))}\r\n      </div>\r\n      <Pagination\r\n          activePage={this.state.page}\r\n          itemsCountPerPage={this.state.meta.per}\r\n          totalItemsCount={this.state.meta.total}\r\n          pageRangeDisplayed={8}\r\n          onChange={this.handlePageChange.bind(this)}\r\n      />\r\n    </>\r\n  }\r\n}\r\n\r\nexport default PhotoList;\r\n"]},"metadata":{},"sourceType":"module"}